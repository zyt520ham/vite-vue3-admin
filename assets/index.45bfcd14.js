var h=(n,e,a)=>new Promise((l,u)=>{var f=t=>{try{d(a.next(t))}catch(i){u(i)}},v=t=>{try{d(a.throw(t))}catch(i){u(i)}},d=t=>t.done?l(t.value):Promise.resolve(t.value).then(f,v);d((a=a.apply(n,e)).next())});import{c as o,A as O,J as S,d as x,r as C,a0 as F,a1 as A,ap as B,Y as _,N as z,O as D,a7 as s,$ as r,b1 as U,aO as V,U as g,aa as E,V as L,W as N,a8 as P,b2 as j,ai as m,aQ as M}from"./index.0ac8147a.js";import{_ as k}from"./logo.d49f8590.js";var $={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64L128 192v384c0 212.1 171.9 384 384 384s384-171.9 384-384V192L512 64zm312 512c0 172.3-139.7 312-312 312S200 748.3 200 576V246l312-110 312 110v330z"}},{tag:"path",attrs:{d:"M378.4 475.1a35.91 35.91 0 00-50.9 0 35.91 35.91 0 000 50.9l129.4 129.4 2.1 2.1a33.98 33.98 0 0048.1 0L730.6 434a33.98 33.98 0 000-48.1l-2.8-2.8a33.98 33.98 0 00-48.1 0L483 579.7 378.4 475.1z"}}]},name:"safety",theme:"outlined"},R=$;function b(n){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?Object(arguments[e]):{},l=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(a).filter(function(u){return Object.getOwnPropertyDescriptor(a,u).enumerable}))),l.forEach(function(u){T(n,u,a[u])})}return n}function T(n,e,a){return e in n?Object.defineProperty(n,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[e]=a,n}var y=function(e,a){var l=b({},e,a.attrs);return o(O,b({},l,{icon:R}),null)};y.displayName="SafetyOutlined";y.inheritAttrs=!1;var q=y;const J=n=>(L("data-v-27f7e92c"),n=n(),N(),n),Q={class:"login-box"},W=J(()=>g("div",{class:"login-logo"},[g("img",{src:k,width:"45"}),g("h1",{class:"mb-0 ml-2 text-3xl font-bold"},"Antd Admin")],-1)),Y=["src"],G=P(" \u767B\u5F55 "),H=x({setup(n){const e=C({loading:!1,captcha:"",formInline:{username:"",password:"",verifyCode:"",captchaId:""}}),a=F(),l=A(),u=B(),f=()=>h(this,null,function*(){const{id:d,img:t}=yield j({width:100,height:50});e.captcha=t,e.formInline.captchaId=d});f();const v=()=>h(this,null,function*(){const{username:d,password:t,verifyCode:i}=e.formInline;if(d.trim()==""||t.trim()=="")return m.warning("\u7528\u6237\u540D\u6216\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A\uFF01");if(!i)return m.warning("\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01");m.loading("\u767B\u5F55\u4E2D...",0),e.loading=!0,e.formInline;try{yield u.login(e.formInline).finally(()=>{e.loading=!1,m.destroy()}),m.success("\u767B\u5F55\u6210\u529F\uFF01"),setTimeout(()=>{var c;return l.replace((c=a.query.redirect)!=null?c:"/")})}catch(c){M.error({title:()=>"\u63D0\u793A",content:()=>c.message}),f()}});return(d,t)=>{const i=_("a-input"),c=_("a-form-item"),I=_("a-button"),w=_("a-form");return z(),D("div",Q,[W,o(w,{layout:"horizontal",model:r(e).formInline,onSubmit:E(v,["prevent"])},{default:s(()=>[o(c,null,{default:s(()=>[o(i,{value:r(e).formInline.username,"onUpdate:value":t[0]||(t[0]=p=>r(e).formInline.username=p),size:"large",placeholder:"rootadmin"},{prefix:s(()=>[o(r(U),{type:"user"})]),_:1},8,["value"])]),_:1}),o(c,null,{default:s(()=>[o(i,{value:r(e).formInline.password,"onUpdate:value":t[1]||(t[1]=p=>r(e).formInline.password=p),size:"large",type:"password",placeholder:"123456",autocomplete:"new-password"},{prefix:s(()=>[o(r(V),{type:"user"})]),_:1},8,["value"])]),_:1}),o(c,null,{default:s(()=>[o(i,{value:r(e).formInline.verifyCode,"onUpdate:value":t[2]||(t[2]=p=>r(e).formInline.verifyCode=p),placeholder:"\u9A8C\u8BC1\u7801",maxlength:4,size:"large"},{prefix:s(()=>[o(r(q))]),suffix:s(()=>[g("img",{src:r(e).captcha,class:"absolute right-0 h-full cursor-pointer",onClick:f},null,8,Y)]),_:1},8,["value"])]),_:1}),o(c,null,{default:s(()=>[o(I,{type:"primary","html-type":"submit",size:"large",loading:r(e).loading,block:""},{default:s(()=>[G]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","onSubmit"])])}}});var ee=S(H,[["__scopeId","data-v-27f7e92c"]]);export{ee as default};
